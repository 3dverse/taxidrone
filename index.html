<html>
    <head>
        <meta charset="UTF-8"/>
        <meta  content="width=device-width,initial-scale=1.0" name="viewport"/>
        <link rel="stylesheet" href="style3.css" />
        

    </head>
<body>
    <div class="header-container">
        <div>
            <button class="bttn-flow-1" role="button" id="bttn-go-Welcome">HOME</button>
        </div>
        <div>
            <hr>
        </div>
        <div>
            <button class="bttn-flow-2" role="button" id="bttn-go-Config">CONFIGURE</button>
        </div>
        <div>
            <hr>
        </div>
        <div>
            <button class="bttn-flow-2" role="button" id="bttn-go-Comparison">COMPARATIVE</button>  
        </div>

    </div>

    
    <div class="canvas-container">
        <!-- CANVAS -->
        <canvas
            id="display-canvas"
            class="display-canvas"
            oncontextmenu="event.preventDefault()"
            onclick="onClick(event)"
        ></canvas>

        <!-- WELCOME UI -->
        <div class="welcome-window" id="welcome-window">
            <div class="welcome-title">
                <button class="txt-name-drone" role="button" id="txt-name-drone">X 7926R</button>
                <button class="txt-name-pfx" role="button" id="txt-name-pfx">BY PREFIXA</button>
            </div>
            <div class="welcome-text">
                <button class="txt-info-drone" role="button" id="txt-info-drone">Autonomous self-flying taxi drone X 7926R brings a business experience, 
an executive transportation aircraft, allowing to reach important meetings 
by skipping the expected traffic delays.
                </button>
            </div>
        </div>
        <div class="start-button" id="start-button">
            <button class="bttn-start" role="button" id="bttn-start"> </button>
            <button class="bttn-start-1" role="button" id="bttn-start-1"> Press to start configuration</button>
        </div>

         <!-- Configuration UI -->
        <div class="configuration-window" id="config-window"> 
            <!-- Config sets -->
            <div class="config-sets">
                <div class="sets-bttns">
                    <div>
                        <button class="bttn-set" role="button" id="bttn-set-blade">Rotor blades</button>
                    </div>
                    <div>
                        <button class="bttn-set" role="button" id="bttn-set-mats">Exterior paint</button>
                    </div>
                    <div>
                        <button class="bttn-set" role="button" id="bttn-set-anim">Action</button>
                    </div>
                </div>
                  <!-- Config Aspa -->
                <div class="config-aspa">
                    <div class="aspa-option"> 
                        <button class="bttn-aspa-option-1" role="button" id="bttn-aspa-1"></button>
                        <button class="text-mat-option" role="button" id="txt-aspa-1">Sk1028</button>
                    </div>
                    <div class="aspa-option">
                        <button class="bttn-aspa-option-2" role="button" id="bttn-aspa-2"></button>
                        <button class="text-mat-option" role="button" id="txt-aspa-2">Sq302</button>
                    </div>
                </div>
                <!-- Config Mats -->
                <div class="config-mat" id="set-mats">
                    <div class="mat-option">
                        <button class="bttn-mat-option-1" role="button" id="bttn-material-1"></button>
                        <button class="text-mat-option" role="button" id="txt-material-1">Vermillon</button>
                    </div>
                    <div class="mat-option">
                        <button class="bttn-mat-option-2" role="button" id="bttn-material-2"></button>
                        <button class="text-mat-option" role="button" id="txt-material-2">Cobalt</button>
                    </div>
                    <div class="mat-option">
                        <button class="bttn-mat-option-3" role="button" id="bttn-material-3"></button>
                        <button class="text-mat-option" role="button" id="txt-material-3">Bussiness Navy</button>
                    </div>
                    <div class="mat-option">
                        <button class="bttn-mat-option-4" role="button" id="bttn-material-4"></button>
                        <button class="text-mat-option" role="button" id="txt-material-4">Black Pearl</button>
                   </div>
                </div>
                  <!-- Config Anim-->
                <div class="config-anim">
                    <div class="anim-option">
                        <button class="bttn-anim-option-1" role="button" id="bttn-anim-2"></button>
                        <button class="text-mat-option" role="button" id="txt-anim-2">Hover</button>
                    </div>
                    <div class="anim-option">
                       <button class="bttn-anim-option-2" role="button" id="bttn-anim-3"></button>
                       <button class="text-mat-option" role="button" id="txt-anim-3">360Â°</button>
                    </div>
                </div>

            </div>            

           
                     

          

        </div>

        <div class="config-set-lights" id="config-set-lights">
            <div class="config-light">
                    <button class="bttn-light-toggle" role="button" id="bttn-anim-1"></button>
                    <button class="text-light-toggle" role="button" id="txt-anim-1">Lights</button>
            </div>
        </div>


        <div class="config-set-labels" id="config-set-labels-1">
                <div>
                    <button class="txt-label" role="button" id="txt-label-hull">The hull of the Drone X7926R is one of the greatest innovations in our times. The combination of kevlar and carbon fiber gives the hull unprecedented resistance and lightness.</button>
                    <button class="txt-label" role="button" id="txt-label-blade1">The Rotor Blade Model SK1028 offers the Drone faster and more agile mobility thanks to its 7-part blades. In addition, the angles of its design provides a great sporty style honoring its speed improvement.</button>
                    <button class="txt-label" role="button" id="txt-label-blade2">The Rotor Blade Model SQ302 has a lighter design, which gives the drone an elegant mood. Following this line, the 3-part propellers offers noise cancellation that improves the user experience.</button>
                </div>
        </div>

        
        <!-- Comparative UI -->
        <div class="comparative-window" id="comparative-window">
            <div class="comparative-names">
                <div class="comparative-original">
                    <button class="bttn-comparative" role="button" id="bttn-comparative-1">Base Drone</button>
                </div>
        
                <div class="comparative-custom">
                    <button class="bttn-comparative" role="button" id="bttn-comparative-2">Custom Drone</button>
                </div>
            </div>
           
            <div class="original-info">
                <button class="txt-original-info" role="button" id="txt-info-original">Specs orginal drone
                    Aspa
                    paint
                </button>
            </div>
            <div class="custom-info">
                <button class="txt-custom-info" role="button" id="txt-info-custom">Specs custom drone
                    Aspa
                    paint
                </button>
            </div>
            
        </div>

        
       


    </div>
        
    <!-- LIVELINK SDK -->
    <script src="https://cdn.3dverse.com/legacy/sdk/stable/SDK3DVerse.js"></script>

    
   
</body>
 <!-- APP ENTRYPOINT -->
 <script src="main.js" type="module"></script>

 <script>
     //HULL ENTITIES UUIDS
        var id_body = '91deaae6-db56-4c86-9149-40573e09523b';
        var id_hull = 'bdc0e85d-06dc-4f35-9da7-5f18b05b416b';
        var id_l_door_paint = 'e88fb3f7-e946-48dc-9e17-a70fc821334a';
        var id_r_door_paint = '708cc5aa-f903-4d42-8dce-0a12e633e029';
        var id_blade1 ='678823c9-79ea-4114-aa5d-3f1dc7648b3d';
        var id_blade2 ='678823c9-79ea-4114-aa5d-3f1dc7648b3d';
        var id_blade1_bl ='1a036cf6-c28b-41bc-b5e8-031fa72e5b8d';
        var id_blade2_br ='067e428a-e0c5-4f3f-92e4-8ad26fb24ca1';

        var labelsArray = ['txt-label-hull','txt-label-blade1','txt-label-blade2'];

        var id_aspa1_fl = '547aceab-c09f-4d57-8aec-cd3d1c717f60';
        var id_aspa1_fr ='ca447d6d-2f95-4a4a-8074-193f1d5bf3ee';
        var id_aspa1_bl ='2e438b45-c02f-4f5c-90ca-6353864ded96';
        var id_aspa1_br ='df10c21f-3e68-4910-b8ee-b970a7c11779';

        var id_aspa2_fl = 'c287c405-302d-43af-a61f-3bb102624fae';
        var id_aspa2_fr ='b55487b0-b150-449c-92d6-3512477af5f8';
        var id_aspa2_bl ='cb4df039-b727-4764-96f2-f76df474b74a';
        var id_aspa2_br ='61ce2550-2af2-45e0-9767-6ad036298840';

        var body = 0;
        var ldoor = 0;
        var rdoor =0;
        var blade1 = 0;
        var blade1_bl = 0;
        var blade1_br = 0;
        var blade2= 0;

        var isConfiguration = false;

        var isbody =false;
        var isblade1 = false;
        var isblade2 = false;
    
    //Flow  control of configurator windows
    document.getElementById("bttn-go-Config").addEventListener('click', function(){
        HideAllAnotations(labelsArray, "none");
        isConfiguration = true;
    });
    document.getElementById("bttn-start").addEventListener('click', function(){
        HideAllAnotations(labelsArray, "none");
        isConfiguration = true;

    });
    document.getElementById("bttn-start-1").addEventListener('click', function(){
        HideAllAnotations(labelsArray, "none");
        isConfiguration = true;

    });
    document.getElementById("bttn-go-Welcome").addEventListener('click', function(){
        isConfiguration = false;

    });
    document.getElementById("bttn-go-Comparison").addEventListener('click', function(){
        isConfiguration = false;

    });
  
    function HideAllAnotations(labelsArray, visualization){
        for(let i=0; i < labelsArray.length; i++){
            document.getElementById(labelsArray[i]).style.display = visualization;
        }
    }

    var clickedEntity = 0;;

    var lastEntity;
    //  get entities from click
    async function onClick(event){
        screenTarget = await SDK3DVerse.engineAPI.castScreenSpaceRay(event.clientX, event.clientY);

        if(!screenTarget.pickedPosition) return;
        
        clickedEntity = screenTarget.entity;
                        
     
        if(isConfiguration){

             // mostrar una anotacion si se clickea una entidad especifica 
             if(clickedEntity.getEUID() ==  id_r_door_paint || clickedEntity.getEUID() == id_r_door_paint || clickedEntity.getEUID() == id_hull){
                if(!isbody){
                    UnselectBlade1();
                    UnselectBlade2();
                    SelectHull();
                    isbody = true;
                    isblade1 = false;
                    isblade2 = false;

                }
                else {
                    UnselectHull();
                    isbody = false;
                }
            }  

            if(clickedEntity.getEUID() ==  id_aspa1_bl || clickedEntity.getEUID() == id_aspa1_br || clickedEntity.getEUID() == id_aspa1_fl || clickedEntity.getEUID() == id_aspa1_fl){
                if(!isblade1){
                    UnselectHull();
                    UnselectBlade2();
                    SelectBlade1();
                    
                    isblade1 = true;
                    isblade2 = false;

                    isbody = false;
                }
                else {
                    UnselectBlade1();
                    isblade1 = false;
                }
            }  

            if(clickedEntity.getEUID() ==  id_aspa2_bl || clickedEntity.getEUID() == id_aspa2_br || clickedEntity.getEUID() == id_aspa2_fl || clickedEntity.getEUID() == id_aspa2_fl){
                if(!isblade2){
                    UnselectHull();
                    UnselectBlade1();
                    SelectBlade2();
                    
                    isblade2 = true;
                    isblade1 = false;
                    isbody = false;
                }
                else {
                    UnselectBlade2();
                    isblade2 = false;
                }
            }  
        
        }

            
           
        
    }

    async function SelectHull(){
        //Show Annotation
        HideAllAnotations(labelsArray, "none");
        document.getElementById(labelsArray[0]).style.display = "flex";
        document.getElementById("config-set-labels-1").style.display = "inline";

        var temphull = await SDK3DVerse.engineAPI.findEntitiesByEUID(id_body);
        body = temphull[0];

        body.select();
        console.log('select');
    }
 
    async function UnselectHull(){
        HideAllAnotations(labelsArray, "none");
        document.getElementById("config-set-labels-1").style.display = "none";


        var temphull = await SDK3DVerse.engineAPI.findEntitiesByEUID(id_body);
        body = temphull[0];

        body.unselect();

        console.log('unselect');

    } 
    
    async function SelectBlade1(){
        //Show Annotation
        HideAllAnotations(labelsArray, "none");
        document.getElementById(labelsArray[1]).style.display = "flex";
        document.getElementById("config-set-labels-1").style.display = "inline";

        var tempblade1 = await SDK3DVerse.engineAPI.findEntitiesByEUID(id_blade1);
        blade1 = tempblade1[0];
      

        blade1.select();
        console.log('select blade 1');
    }
 
    async function UnselectBlade1(){
        HideAllAnotations(labelsArray, "none");
        document.getElementById("config-set-labels-1").style.display = "none";

        var tempblade1 = await SDK3DVerse.engineAPI.findEntitiesByEUID(id_blade1);
        blade1 = tempblade1[0];

        blade1.unselect();

        console.log('unselect blade 1');
    } 
    async function SelectBlade2(){
        //Show Annotation
        HideAllAnotations(labelsArray, "none");
        document.getElementById(labelsArray[2]).style.display = "flex";
        document.getElementById("config-set-labels-1").style.display = "inline";

        var tempblade2 = await SDK3DVerse.engineAPI.findEntitiesByEUID(id_blade1);
        blade2 = tempblade2[0];
      

        blade2.select();
        console.log('select blade 2');
    }
 
    async function UnselectBlade2(){
        HideAllAnotations(labelsArray, "none");
        document.getElementById("config-set-labels-1").style.display = "none";

        var tempblade2 = await SDK3DVerse.engineAPI.findEntitiesByEUID(id_blade1);
        blade2 = tempblade2[0];

        blade2.unselect();

        console.log('unselect blade 1');
    } 


  
   

    

    
 </script>


</html>